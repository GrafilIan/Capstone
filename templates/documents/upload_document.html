{% extends 'base.html' %}

{% block content %}
<h2>Upload Document</h2>

<form method="post" enctype="multipart/form-data">
  {% csrf_token %}
  <div class="form-group">
    <label for="requirement">Requirement</label>
    <select name="requirement" id="requirement" class="form-control">
      <option value="Acceptance Form for OJT">Acceptance Form for OJT</option>
      <option value="Internship Agreement">Internship Agreement</option>
      <option value="Merit of Rating">Merit of Rating</option>
      <option value="Student INFO Sheet">Student Information Sheet</option>
      <option value="Supervisor Feedback Form">Supervisor Feedback Form</option>
      <option value="Student Feedback Form">Student Feedback Form</option>
      <option value="Parent Consent">Parent Consent</option>
      <option value="Barangay Clearance">Barangay Clearance</option>
      <option value="Police Clearance">Police Clearance</option>
      <option value="Parent ID">Parent ID</option>
      <option value="Medical Certificate">Medical Certificate</option>
      <option value="Cedula">Cedula</option>

    </select>
  </div>
  <div class="form-group">
    <label for="document_image">Upload Document</label>
    <input type="file" name="document_image" id="document_image" class="form-control-file">
  </div>
  <div class="form-group">
    <label>Image Preview</label>
    <img id="image-preview" src="" alt="Image Preview" style="display: none; max-width: 200px;">
  </div>
  <button type="submit" class="btn btn-primary">Upload</button>
</form>

<a href="{% url 'document_list' %}">View Uploaded Documents</a> <br>
<a href="{% url 'home' %}">Home</a>
<script>
// JavaScript code to handle image preview
document.getElementById('document_image').addEventListener('change', function() {
  var input = this;
  var imgPreview = document.getElementById('image-preview');

  if (input.files && input.files[0]) {
    var reader = new FileReader();

    reader.onload = function(e) {
      imgPreview.src = e.target.result;
      imgPreview.style.display = 'block';

      // Set the maximum width to 200 pixels
      if (imgPreview.width > 200) {
        imgPreview.width = 200;
      }
    };

    reader.readAsDataURL(input.files[0]);
  } else {
    imgPreview.src = '';
    imgPreview.style.display = 'none';
  }
});
</script>
{% endblock %}
