{% extends "base.html" %}
{% block content %}
  <h1>Internship Calendar</h1>

  {% if interns_calendar %}
    <h2>Your Calendar</h2>
    <ul>
      {% for week_number, bins_in_week in submission_bins_with_dates.items %}
        <li>
          <h3>Week {{ week_number }}</h3>
          <ul>
            {% for bin_number, adjusted_bin_number, bin_date in bins_in_week %}
              <li>
                Submission Bin {{ bin_number }} (Date: {{ bin_date|date:"F d, Y" }})
                <a href="{% url 'daily_accomplishment_create' date=bin_date %}">Add Daily Report for {{ bin_date|date:"F d, Y" }}</a>
                <!-- Display daily accomplishment reports for this date -->
                <ul class="accomplishments-list">
                  {% for accomplishment in accomplishments %}
                    {% if accomplishment.date|date:"F d, Y" == bin_date|date:"F d, Y" %}
                      <li class="accomplishment-item">
                        Date: {{ accomplishment.date|date:"F d, Y" }}
                        <p>{{ accomplishment.text_submission }}</p>
                        {% if accomplishment.document_submission %}
                          <a href="{{ accomplishment.document_submission.url|safe }}" target="_blank">Download File</a>
                        {% endif %}
                      </li>
                    {% endif %}
                  {% empty %}
                  {% endfor %}
                </ul>
              </li>
            {% endfor %}
          </ul>
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <p>{{ message }}</p>
  {% endif %}

  <a href="{% url 'interns_calendar_create' %}">Set Up Calendar</a> <br>
  <a href="{% url 'time_in_out' %}">Add Time Record</a> <br><br>
  <a href="{% url 'upload_document' %}">Upload Requirements</a> <br>
  <a href="{% url 'document_list' %}">View Documents</a> <br>

  <!-- CSS to ensure 7 bins per row -->
  <style>
    ul {
      list-style-type: none;
      padding: 0;
    }
    .submission-bins h3 {
      margin-top: 20px;
    }
    .accomplishments-list {
      margin-left: 20px;
    }
  </style>
{% endblock %}
