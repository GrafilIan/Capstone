{% extends "base.html" %}
{% block content %}
  <h2>Internship Calendar</h2>
  <p>Start Month: {{ interns_calendar.start_month|date:"F d, Y" }}</p>
  <p>End Month: {{ interns_calendar.end_month|date:"F d, Y" }}</p>
  <a href="{% url 'logout' %}">Log Out</a> <br>

  <!-- Generate submission bins based on the number of days -->
  <h3>Submission Bins</h3>
  <div class="submission-bins">
    <ul class="bins-list">

      {% for bin_number, adjusted_bin_number, bin_date in submission_bins_with_dates %}
        {% if forloop.first or bin_date.day == 1 %}

        {% endif %}
        <li class="bin-item">
          Day {{ bin_number }}
          <br>
          Date: {{ bin_date|date:"F d, Y" }}
          <a href="{% url 'daily_accomplishment_create' date=bin_date %}">Add Daily Report for {{ bin_date|date:"F d, Y" }}</a>
          <!-- Display daily accomplishment reports for this date -->
          <ul class="accomplishments-list">
            {% for accomplishment in accomplishments %}
              {% if accomplishment.date|date:"F d, Y" == bin_date|date:"F d, Y" %}
                <li class="accomplishment-item">
                  Date: {{ accomplishment.date|date:"F d, Y" }}
                  <p>{{ accomplishment.text_submission }}</p>
                  {% if accomplishment.document_submission %}
                    <a href="{{ accomplishment.document_submission.url|safe }}" target="_blank">Download File</a>
                  {% endif %}
                </li>
              {% endif %}
            {% empty %}
            {% endfor %}
          </ul>
        </li>
        {% if forloop.counter|divisibleby:7 %}
          </ul><ul class="bins-list">
        {% endif %}
      {% endfor %}
    </ul>
  </div>

  <a href="{% url 'interns_calendar_create' %}">Set Up Calendar</a> <br>
  <a href="{% url 'time_in_out' %}">Add Time Record</a> <br><br>
  <a href="{% url 'upload_document' %}">Upload Requirements</a> <br>
  <a href="{% url 'document_list' %}">View Documents</a> <br>

  <!-- CSS to ensure 7 bins per row -->
  <style>
    .submission-bins ul.bins-list {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
    }
    .submission-bins ul.bins-list > li {
      flex-basis: calc(14.28% - 10px); /* Adjust this width as needed */
      margin-bottom: 10px; /* Adjust the margin between bins as needed */
    }
  </style>
</div>
{% endblock %}