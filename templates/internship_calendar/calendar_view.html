{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" type="text/css" href="{% static 'style/calendar_view.css' %}">
  <title>Add Daily Report</title>

</head>
<body>
{% block content %}
  <h2>Internship Calendar</h2>
  <p>Start Month: {{ interns_calendar.start_month|date:"F d, Y" }}</p>
  <p>End Month: {{ interns_calendar.end_month|date:"F d, Y" }}</p>
  <a href="{% url 'logout' %}">Log Out</a> <br>

  <!-- Generate submission bins based on the number of days -->
  <h3>Submission Bins</h3>
  <div class="submission-bins">
    <ul class="bins-list">
      {% for week in weeks %}
      <h3 class="week"> {{ week.week_number }} </h3>
        <li class="week-item">

          <ul class="bins-in-week">
            {% for bin_date in week.bin_dates %}
              <li class="bin-item">
                <p class="day"> Day {{ forloop.counter }} </p>
                <br>
                <p class="month"> {{ bin_date|date:"F d" }} </p>
                <a href="{% url 'daily_accomplishment_create' date=bin_date %}"><button class="green-button"> Add </button></a>
                <!-- Display daily accomplishment reports for this date -->
                <ul class="accomplishments-list">
                  {% for accomplishment in accomplishments %}
                    {% if accomplishment.date|date:"F d, Y" == bin_date|date:"F d, Y" %}
                      <li class="accomplishment-item{% if accomplishment.is_rest_day %} rest-day{% endif %}">
                        Rest Day
                        <p>{{ accomplishment.text_submission }}</p>
                        {% if accomplishment.document_submission %}
                          <a href="{{ accomplishment.document_submission.url|safe }}" target="_blank">Download File</a>
                        {% endif %}
                      </li>
                    {% endif %}
                  {% empty %}
                  {% endfor %}
                </ul>
              </li>
            {% endfor %}
          </ul>
        </li>
      {% endfor %}
    </ul>
  </div>

  <a href="{% url 'interns_calendar_create' %}">Set Up Calendar</a> <br>
  <a href="{% url 'time_in_out' %}">Add Time Record</a> <br><br>
  <a href="{% url 'upload_document' %}">Upload Requirements</a> <br>
  <a href="{% url 'document_list' %}">View Documents</a> <br>

  <!-- CSS to ensure 7 bins per row -->
  <style>
    .submission-bins ul.bins-list {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
    }
    .submission-bins ul.bins-list > li {
      flex-basis: 100%;
      margin-bottom: 20px; /* Adjust the margin between weeks as needed */
    }
    .week-item {
      font-weight: bold;
    }
    .bins-in-week {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
    }
    .bins-in-week > li {
      flex-basis: calc(14.28% - 10px); /* Adjust this width as needed */
      margin-bottom: 10px; /* Adjust the margin between bins as needed */
    }

    /* Style for rest days */
    .rest-day {
      background-color: #FF5733; /* Adjust the background color as needed */
      color: #FFFFFF; /* Text color for rest days */
    }
  </style>
</div>
{% endblock %}
</body>